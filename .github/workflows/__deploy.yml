name: Deploy ğŸ—ï¸

on:
  workflow_call:
    inputs:
      branch:
        required: true
        type: string
      commit:
        required: false
        type: string
      comment:
        required: false
        type: boolean
      artifact_name:
        required: false
        type: string
        default: frontend

jobs:
  cf-pages:
    name: CloudFlare Pages ğŸ“ƒ
    runs-on: ubuntu-latest
    environment: 
      name: ${{ inputs.branch == 'master' && 'Production' || 'Preview' }}
      url: ${{ steps.cf.outputs.deployment-url }}
    outputs:
      url: ${{ steps.cf.outputs.deployment-url }}

    steps:
      - name: Download workflow artifact â¬‡ï¸
        uses: actions/download-artifact@d3f86a106a0bac45b974a628896c90dbdf5c8093 # v4.3.0
        with:
          name: ${{ inputs.artifact_name }}
          path: dist
